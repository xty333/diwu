<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../../dist/css/sign.min.css">
</head>
<body>
    <!-- 头 -->
    <header>
        <div class="header-box">
            <div class="header-left">
                <img src="../img/logo.jpg" alt="">
                <img src="../img/shu.png" alt="">
                <p>注册第五大道</p>
            </div>
            <div class="header-right">
                <img src="../img/indexdianhua.png" alt="">
                <p>
                    客服热线：4008-6767-38
                </p>
            </div>
        </div>
        
    </header>

    <!-- 注册 -->
    <div class="zhu">
        <div class="zhu1">
            <div class="zhu-right">
                <div class="head">
                    注册第五大道
                </div>

                <p><input type="text" name="" id="uname" placeholder="&nbsp;&nbsp;手机号"></p>
                <p><input type="text" name="" id="rdInt_r" placeholder="&nbsp;&nbsp;请输入验证码"></p>
                <p><input type="button" name="" id="rdInt" value="获取验证码"></p>
                <p><input type="password" name="" id="upwd" placeholder="&nbsp;&nbsp;请输入密码"></p>
                <p><input type="password" name="" id="sure" placeholder="&nbsp;&nbsp;确认密码"></p>
                
                <p>
                    <input type="button" value="立即注册" id="reg">
                    <input type="checkbox">
                    <span class="span1">我已阅读并同意</span>
                    <span class="span2">《第五大道用户协议》</span>
                    <div id="log" style="color: #ff9900;
                    margin-top:20px; font-size: 12px; ">已有账号？</div>
                </p>
            </div>
        </div>
        
    </div>

    
<!-- 底部 -->
<div class="bottom-wrap">
    <div class="bottom-con">
        <div class="VIP">
            <ul>
                  <li>
                      <a class="min-logo" href="">
                          <img src="../img/10.jpg" alt="">
                          <span>正品保障</span>
                      </a>
                  </li>
                  <li>
                      <a class="min-logo" href="">
                          <img src="../img/14.jpg" alt="">
                          <span>专柜发货</span>
                      </a>
                  </li>
                  <li>
                      <a class="min-logo" href="">
                          <img src="../img/12.jpg" alt="">
                          <span>无忧售后</span>
                      </a>
                  </li>
                  <li>
                      <a class="min-logo" href="">
                          <img src="../img/13.jpg" alt="">
                          <span>VIP服务</span>
                      </a>
                  </li>
                  <li>
                      <a class="min-logo" href="">
                          <img src="../img/14.jpg" alt="">
                          <span>权威荣誉</span>
                      </a>
                  </li>
            </ul>
        </div>
        <div class="APP">
            <div class="help">
                <p class="nerver">服务保障</p>
                <ul>
                    <li><a href="">品牌授权正品</a></li>
                    <li><a href="">品牌客服</a></li>
                    <li><a href="">预约到店体验</a></li>
                    <li><a href="">7天无理由退货</a></li>
                </ul>
            </div>
            <div class="help">
              <p class="nerver">使用帮助</p>
              <ul>
                  <li><a href="">常见问题</a></li>
                  <li><a href="">会员制度</a></li>
                  <li><a href="">会员制度</a></li>
                  <li><a href="">7天无理由退货</a></li>
              </ul>
          </div>
          <div class="help">
              <p class="nerver">支付方式</p>
              <ul>
                  <li><a href="">品牌授权正品</a></li>
                  <li><a href="">品牌客服</a></li>
                  <li><a href="">会员制度</a></li>
                  <li><a href="">7天无理由退货</a></li>
              </ul>
          </div>
          <div class="help">
              <p class="nerver">售后方式</p>
              <ul>
                  <li><a href="">品牌授权正品</a></li>
                  <li><a href="">品牌客服</a></li>
                  <li><a href="">预约到店体验</a></li>
                  <li><a href="">7天无理由退货</a></li>
              </ul>
          </div>
          <div class="help">
              <p class="nerver">配送方式</p>
              <ul>
                  <li><a href="">配送说明</a></li>
                  <li><a href="">品牌客服</a></li>
                  <li><a href="">品牌客服</a></li>
                  <li><a href="">7天无理由退货</a></li>
              </ul>
          </div>
          <div class="help help-2">
              <p class="nerver">第五大道APP</p>
              <a href=""><img src="../img/78.jpg" alt=""></a>
          </div>
          <div class="help help-2">
              <p class="nerver">第五大道微博</p>
              <a href=""><img src="../img/78.jpg" alt=""></a>
          </div>

        </div>
        <div class="copy">
             <div class="copy-top">
                     <a href="">箱包</a>
                     <a href="">美妆</a>
                     <a href="">服饰</a>
                     <a href="">箱包</a>
                     <a href="">美妆</a>
                     <a href="">服饰</a>
                     <a href="">美妆</a>
                     <a href="">服饰</a>
             </div>
             <div class="copy-top top-2">
                      <a href="">关于第五大道</a>
                      <a href="">网站地图</a>
                      <a href="">品牌合作专区</a>
                      <a href="">媒体聚焦</a>
                      <a href="">商务合作</a>
                      <a href="">商家合作</a>
                      <a href="">品牌合作专区</a>
                      <a href="">媒体聚焦</a>
                      <a href="">商务合作</a>
                      <a href="">商家合作</a>
          </div>
          <div class="copy-top">
            <a href="">Copyright © 2008-2014 瑞美嘉信国际信息技术（北京）有限公司  版权所有京ICP备09012701号 京公网安备 11010102003747号 丨营业执照</a>
         </div>
         <div class="copy-icon">
              <a href=""><img src="./img/15.jpg" alt=""></a>
              <a href=""><img src="./img/16.jpg" alt=""></a>
              <a href=""><img src="./img/15.jpg" alt=""></a>
         </div>
        </div>
    </div>
</div>

</body>

<script src="../../dist/uglify/tools.min.js"></script>
<script src="../../dist/uglify/cookie.min.js"></script>
<script>
  
    class Registor{
        constructor(){
            //属性
            //用户名
            this.o_uname = document.querySelector('#uname');
            //密码
            this.o_upwd = document.querySelector('#upwd');
            //确认密码
            this.o_sure = document.querySelector('#sure');
            //注册按钮
            this.o_reg = document.querySelector('#reg');
            //获取验证码
            this.rdInt = document.querySelector("#rdInt");
            //输入验证码
            this.rdInt_r= document.querySelector("#rdInt_r");
            //获取复选框
            this.check =document.querySelector("[type=checkbox]");
            //调用添加事件的方法
            this.addEvent();
        }
        //添加事件
        addEvent(){
            var arr = [false,false,false];
            this.o_sure.onblur = function(){
                if(!this.o_sure.value){
                    alert('确认密码不能为空！');
                    arr[2] = false;
                    return;
                }else{
                    arr[2] = true;
                }
            }
            
            //判断用户名是否合法以及是否在cookie中存在 
            this.o_uname.onblur = function(){
                //正则 （2~10的中文）
                let re = /^1\d{10}$/;
                //获取用户名
                let s_uname = this.value;
                //检测是否合格
                if(!re.test(s_uname)){
                    alert('请输入11位有效数字');
                    arr[0] = false;
                    return;
                }else{
                    arr[0] = true;
                }
                //获取cookie
                let cookieStr = getCookie('registors') ? getCookie('registors') : '';
                //将cookie字符串转为json对象
                let cookieObj = convertStrToObj(cookieStr);
                //判断注册的用户名是否在cookie中存在
                //in : 判断一个属性是否属于某个对象
                if(s_uname in cookieObj){
                    alert('手机号已存在');
                    arr[0] = false;
                    return;
                }else{
                    arr[0] = true;
                }
            }
            //判断密码是否合法
            this.o_upwd.onblur = function(){
                //正则（3-16数字)
                let re = /^\d{3,16}$/;
                //获取密码
                let s_upwd = this.value;
                //检测是否合法
                if(!re.test(s_upwd)){
                    alert('请输入3~16位的数字！');
                    arr[1] = false;
                }else{
                    arr[1] = true;
                }
            }
           // 输入验证码
            this.rdInt_r.onblur = function(){
                //正则（3-16数字)
                let re = /^(?!\d+$)[a-zA-Z0-9-_]+$/;
                //获取密码
                let rdInt_r = this.value;
                //检测是否合法
                if(!re.test(rdInt_r)){
                    alert('请点击获取验证码');
                    arr[1] = false;
                }else{
                    arr[1] = true;
                }
            }
            //点击获取验证码
            this.rdInt.addEventListener("click",clickHandler);
            function clickHandler(){
                function  getSum(){
                var arr = [];
                for(var i = 48;i < 123; i++){
                if(i > 57 && i < 65){
                    i = 64;
                    continue;
                }
                if(i > 90 && i < 97){
                    i = 96;
                    continue;
                }
                arr.push(String.fromCharCode(i));
            }
                    arr.sort(function(){
                    return Math.random()-0.5;
            });
                arr.length=4;
                return arr.join("");
                }
            var str = getSum();
            alert(str);
        }
           
        
            //密码与确认密码是否一致
            //记录this
            let that = this;
            this.o_sure.onblur = function(){
                //原密码
                let s_upwd = that.o_upwd.value;
                //确认密码
                let s_sure = this.value;
                //检测 是否一致
                if(s_upwd !== s_sure){
                    alert('两次密码不一致！');
                    arr[2] = false;
                }else{
                    arr[2] = true;
                }
            }
            
            //如果页面中的内容全部合法，就可以进行正常注册了
            //点击注册按钮，进行注册
            this.o_reg.onclick = function(){
                if(arr.indexOf(false) === -1){
                    //获取 用户名
                    let s_uname = this.o_uname.value;
                    //获取密码
                    let s_upwd = this.o_upwd.value;
                    //获取cookie
                    let cookieStr = getCookie('registors') ? getCookie('registors') : '';
                    //将cookie字符串转为json对象
                    let cookieObj = convertStrToObj(cookieStr);
                    //将新的用户名与密码存入对象
                    cookieObj[s_uname] = s_upwd;
                    //将改变后的对象转为字符串并存入cookie
                    createCookie('registors',JSON.stringify(cookieObj),{expires : 7,path : '/'});
                }else{
                    alert('请完善表单！');
                    
                }
            }.bind(this);
            //跳转到登录页
            this.o_reg.onclick = function(){
                location.href = './login.html';
            }
        }
    }
    new Registor();

</script>
</html>