"use strict";$(function(){var e=$('input[type="checkbox"]'),t=$(".whole_check"),s=$(".cartBox"),i=$(".shopChoice"),c=$(".son_check");e.click(function(){$(this).is(":checked")?$(this).next("label").addClass("mark"):$(this).next("label").removeClass("mark")}),t.click(function(){var e=s.find('input[type="checkbox"]');$(this).is(":checked")?(e.prop("checked",!0),e.next("label").addClass("mark")):(e.prop("checked",!1),e.next("label").removeClass("mark")),d()}),c.each(function(){$(this).click(function(){if($(this).is(":checked")){var e=c.length,s=0;c.each(function(){$(this).is(":checked")&&s++}),s==e&&(t.prop("checked",!0),t.next("label").addClass("mark"))}else t.prop("checked",!1),t.next("label").removeClass("mark")})}),i.each(function(){$(this).click(function(){if($(this).is(":checked")){var e=i.length,s=0;i.each(function(){$(this).is(":checked")&&s++}),s==e&&(t.prop("checked",!0),t.next("label").addClass("mark")),$(this).parents(".cartBox").find(".son_check").prop("checked",!0),$(this).parents(".cartBox").find(".son_check").next("label").addClass("mark")}else t.prop("checked",!1),t.next("label").removeClass("mark"),$(this).parents(".cartBox").find(".son_check").prop("checked",!1),$(this).parents(".cartBox").find(".son_check").next("label").removeClass("mark");d()})}),s.each(function(){var t=$(this).find(".son_check");t.each(function(){$(this).click(function(){if($(this).is(":checked")){var e=t.length,s=0;t.each(function(){$(this).is(":checked")&&s++}),s==e&&($(this).parents(".cartBox").find(".shopChoice").prop("checked",!0),$(this).parents(".cartBox").find(".shopChoice").next("label").addClass("mark"))}else $(this).parents(".cartBox").find(".shopChoice").prop("checked",!1),$(this).parents(".cartBox").find(".shopChoice").next("label").removeClass("mark");d()})})});var a=$(".plus"),n=$(".reduce"),r=$(".sum");a.click(function(){var e=$(this).prev("input"),s=parseInt(e.val())+1,t=$(this).parents(".amount_box").find(".reduce"),i=$(this).parents(".order_lists").find(".sum_price"),c=$(this).parents(".order_lists").find(".price").html(),a=s*parseInt(c.substring(1));e.val(s),i.html("￥"+a),1<e.val()&&t.hasClass("reSty")&&t.removeClass("reSty"),d()}),n.click(function(){var e=$(this).next("input"),s=parseInt(e.val())-1,t=$(this).parents(".order_lists").find(".sum_price"),i=$(this).parents(".order_lists").find(".price").html(),c=s*parseInt(i.substring(1));1<e.val()&&(e.val(s),t.html("￥"+c)),1!=e.val()||$(this).hasClass("reSty")||$(this).addClass("reSty"),d()}),r.keyup(function(){var e,s,t=$(this).parents(".order_lists").find(".sum_price"),i=$(this).parents(".order_lists").find(".price").html();""==$(this).val()&&$(this).val("1"),$(this).val($(this).val().replace(/\D|^0/g,"")),s=(e=$(this).val())*parseInt(i.substring(1)),$(this).attr("value",e),t.html("￥"+s),d()});var l=null,h="";function o(){$(".model_bg").fadeOut(300),$(".my_model").fadeOut(300)}function d(){var t=0,i=0,e=$(".calBtn a");c.each(function(){if($(this).is(":checked")){var e=parseInt($(this).parents(".order_lists").find(".sum_price").html().substring(1)),s=parseInt($(this).parents(".order_lists").find(".sum").val());t+=e,i+=s}}),$(".total_text").html("￥"+t),$(".piece_num").html(i),0!=t&&0!=i?e.hasClass("btn_sty")||e.addClass("btn_sty"):e.hasClass("btn_sty")&&e.removeClass("btn_sty")}$(".delBtn").click(function(){l=$(this).parents(".order_lists"),h=l.parents(".order_content"),$(".model_bg").fadeIn(300),$(".my_model").fadeIn(300)}),$(".closeModel").click(function(){o()}),$(".dialog-close").click(function(){o()}),$(".dialog-sure").click(function(){l.remove(),null!=h.html().trim()&&0!=h.html().trim().length||h.parents(".cartBox").remove(),o(),c=$(".son_check"),d()})});